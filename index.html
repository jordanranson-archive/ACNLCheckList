<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">	
	<title>PAGE TITLE</title>
	<style>
        /* http://meyerweb.com/eric/tools/css/reset/ 
        v2.0 | 20110126
        License: none (public domain)
        */

        html, body, div, span, applet, object, iframe,
        h1, h2, h3, h4, h5, h6, p, blockquote, pre,
        a, abbr, acronym, address, big, cite, code,
        del, dfn, em, img, ins, kbd, q, s, samp,
        small, strike, strong, sub, sup, tt, var,
        b, u, i, center,
        dl, dt, dd, ol, ul, li,
        fieldset, form, label, legend,
        table, caption, tbody, tfoot, thead, tr, th, td,
        article, aside, canvas, details, embed, 
        figure, figcaption, footer, header, hgroup, 
        menu, nav, output, ruby, section, summary,
        time, mark, audio, video {
            margin: 0;
            padding: 0;
            border: 0;
            font-size: 100%;
            font: inherit;
            vertical-align: baseline;
        }
        /* HTML5 display-role reset for older browsers */
        article, aside, details, figcaption, figure, 
        footer, header, hgroup, menu, nav, section {
            display: block;
        }
        body {
            line-height: 1;
        }
        ol, ul {
            list-style: none;
        }
        blockquote, q {
            quotes: none;
        }
        blockquote:before, blockquote:after,
        q:before, q:after {
            content: '';
            content: none;
        }
        table {
            border-collapse: collapse;
            border-spacing: 0;
        }
    
        /** Generated by FG **/
        @font-face {
            font-family: 'Conv_FinkHeavy';
            src: url('fonts/FinkHeavy.eot');
            src: local('â˜º'), url('fonts/FinkHeavy.woff') format('woff'), url('fonts/FinkHeavy.ttf') format('truetype'), url('fonts/FinkHeavy.svg') format('svg');
            font-weight: normal;
            font-style: normal;
        }
    
        body {
            color: #e9dec8;
            font: 20pt sans-serif;
            font-family: 'Conv_FinkHeavy';
            background: url(bg.png);
            /*animation: scroll 5s;
            -webkit-animation: scroll 10s linear infinite;*/
        }
        
        h1 {
            font-size: 48pt;
            text-shadow: 3px 3px #1a3014,
                         -2px -2px #f4dc92;
            color: #e6c459;
        }
        
        h2 {
            font-size: 26pt;
            text-shadow: 2px 2px #fafafa;
            color: #1a3014;
        }
        
        h1, h2, h3, h4, h5 {
            margin-bottom: 15px;
        }
        
        input[type=text] {
            font-size: 22pt;
            font-family: 'Conv_FinkHeavy';
            padding: 0 6px;
            margin: 0;
            color: #222;
            vertical-align: top;
            border: none;
            background: #f8efde;
            border-radius: 10px;
            margin-top: -2px;
            box-shadow: 3px 3px #d5a669 inset;
            width: 500px;
            outline: none;
        }
        
        input[type=checkbox] {
            display: none;
        }
        
        input[type=checkbox] ~ span {
            background: #e9dec8;
            margin-bottom: 10px;
            padding: 10px 15px;
            font-size: 22pt;
            display: block;
            border-radius: 100px;
            border-top: solid 6px #f8efde;
            border-left: solid 6px #f8efde;
            border-bottom: solid 6px #d5a669;
            border-right: solid 6px #d5a669;
            height: 32px;
            line-height: 32px;
        }
        
        
        input[type=checkbox] ~ span.indented {
            margin-left: 60px;
        }
        
        input[type=checkbox]:checked ~ span {
            background: #2f762c;
            color: #9fec5b;
            border-top-color: #6ea33f;
            border-left-color: #6ea33f;
            border-bottom-color: #2c5121;
            border-right-color: #2c5121;
        }
        
        input[type=checkbox]:checked ~ span input[type=text] {
            box-shadow: 3px 3px #2c5121 inset;
            background: #3e8b3a;
            color: #9fec5b;
        }
        
        input[type=checkbox] ~ span i {
            width: 22px;
            height: 22px;
            display: inline-block;
            border: solid 4px #c49353;
            border-radius: 100px;
            vertical-align: middle;
            margin-right: 10px;
        }
        
        input[type=checkbox]:checked ~ span i {
            border-color: #9fec5b;
            background: #9fec5b;
        }

        @keyframes scroll {
            from { background-position: 0px 0px; }
            to   { background-position: -72px -72px; }
        }
        
        @-webkit-keyframes scroll {
            from { background-position: 0px 0px; }
            to   { background-position: -72px -72px; }
        }
        
        .wrapper {
            width: 900px;
            margin: 60px auto;
        }
        
        section.list {
            background: rgba(233,222,200,0.8);
            padding: 25px;
            border-radius: 30px;
            color: #222;
            margin-bottom: 30px;
            border: solid 6px #5f8333;
            box-shadow: 4px 4px #1a3014,
                        -4px -4px #6ea33f;
        }
        
        .pull-right {
            float: right;
        }
        
        .pull-left {
            float: left;
        }
        
        .btn {
            background: #e6c459;
            border-radius: 100px;
            padding: 7px 14px;
            display: inline-block;
            color: #955517;
            border-top: solid 5px #f4dc92;
            border-left: solid 5px #f4dc92;
            border-bottom: solid 5px #d38d29;
            border-right: solid 5px #d38d29;
        }
        
        .clearfix {
            overflow: hidden;
            clear: both;
        }
    </style>
    <script src="http://code.jquery.com/jquery-2.0.2.min.js"></script>
    <script src="knockout-2.2.1.js"></script>
    <script src="knockout.mapping-latest.js"></script>
    <script>
        function obs(data) {
            return ko.observable(data);
        }
        
        function obsa(data) {
            return ko.observableArray(data);
        }
    
        function App(sections) {
            var self = this;
            self.sections = ko.observableArray(sections);
            
           self.save = function() {
                var data = ko.toJSON(self.sections);
                localStorage.todo = data;
                
                return true;
            };
            
            self.reset = function() {
                localStorage.clear();
                window.location = window.location;
                //self.sections(todo);
            }
        }
        
        
        // The tasks to do
        var todo = [
        
            {
                title: obs("Main Street (Morning)"),
                tasks: obsa([
                    {indented: obs(false), textbox: obs(false), description: obs("Buy out T&T mart"), done: obs(false)},
                    {indented: obs(false), textbox: obs(false), description: obs("Buy out Gardening Shop"), done: obs(false)},
                    {indented: obs(false), textbox: obs(false), description: obs("Buy out Able Sisters"), done: obs(false)},
                    {indented: obs(false), textbox: obs(false), description: obs("Talk to Sable"), done: obs(false)},
                ])
            },
            
            {
                title: obs("Town"),
                tasks: obsa([
                    {indented: obs(false), textbox: obs(false), description: obs("Water flowers and weed"), done: obs(false)},
                    {indented: obs(false), textbox: obs(false), description: obs("Harvest fruit"), done: obs(false)},
                    {indented: obs(false), textbox: obs(false), description: obs("Collect shels on the beach"), done: obs(false)},
                    {indented: obs(false), textbox: obs(false), description: obs("Smack all 5 rocks"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Rock 1"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Rock 2"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Rock 3"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Rock 4"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Rock 5"), done: obs(false)},
                    {indented: obs(false), textbox: obs(false), description: obs("Collect all 4 fossils"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Fossil 1"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Fossil 2"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Fossil 3"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Fossil 4"), done: obs(false)},
                    {indented: obs(false), textbox: obs(false), description: obs("Talk to all the towns folk"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Bunnie"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Mitzi"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Purrl"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Rosie"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Whinnie"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Lopez"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Chief"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Paula"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Tucker"), done: obs(false)},
                    {indented: obs(true), textbox: obs(false), description: obs("Biff"), done: obs(false)},
                    {indented: obs(false), textbox: obs(false), description: obs("Write letters to all the towns folk"), done: obs(false)},
                    {indented: obs(false), textbox: obs(false), description: obs("Check town square for events"), done: obs(false)},
                    {indented: obs(false), textbox: obs(false), description: obs("Check the campsite for guests"), done: obs(false)},
                ])
            },
            
            {
                title: obs("The Island"),
                tasks: obsa([
                    {indented: obs(false), textbox: obs(false), description: obs("Check the island shop"), done: obs(false)},
                    {indented: obs(false), textbox: obs(false), description: obs("Collect a full load of insects"), done: obs(false)},
                    {indented: obs(false), textbox: obs(false), description: obs("Collect a full load of fish"), done: obs(false)},
                    {indented: obs(false), textbox: obs(false), description: obs("Go on a tour and collect fruit"), done: obs(false)},
                ])
            },
            
            {
                title: obs("Main Street (Evening)"),
                tasks: obsa([
                    {indented: obs(false), textbox: obs(false), description: obs("Donate fish to the museum"), done: obs(false)},
                    {indented: obs(false), textbox: obs(false), description: obs("Donate insects to the museum"), done: obs(false)},
                    {indented: obs(false), textbox: obs(false), description: obs("Pay back 5% of house loan"), done: obs(false)},
                ])
            },
            
            {
                title: obs("Town (Evening)"),
                tasks: obsa([
                    {indented: obs(false), textbox: obs(false), description: obs("Contribute towards public works project"), done: obs(false)},
                    {indented: obs(false), textbox: obs(false), description: obs("Check in with Isabelle"), done: obs(false)},
                ])
            },
            
        ];
        
        $(function() {
            var jsonData = localStorage.todo;
            var taskList = localStorage.todo === undefined ? todo : ko.mapping.fromJSON(jsonData)();
            var app = new App(taskList);

            ko.applyBindings(app);
        });
    </script>
</head>
<body>
    <div class="wrapper">
    
        <div class="clearfix">
            <h1 class="pull-left">Bitville Daily Check List</h1>
            <div class="btn pull-right" style="margin-top: 9px" data-bind="click: reset">Reset List</div>
        </div>
        
        <!-- ko foreach: sections -->
        
        <section class="list">
            <h2 data-bind="text: title()"></h2>
            <ul data-bind="foreach: tasks">
                <li>
                    <label data-bind="click: $root.save">
                        <input type="checkbox" data-bind="checked: done">
                        <span data-bind="css: { indented: indented() }"><i></i>
                            <!-- ko if: textbox() -->
                            <input type="text" data-bind="value: description, event: { keyup: $root.save }">
                            <!-- /ko -->
                            
                            <!-- ko if: !textbox() -->
                            <!-- ko text: description --><!-- /ko -->
                            <!-- /ko -->
                        </span>
                    </label>
                </li>
            </ul>
        </section>
        
        <!-- /ko -->
        
    </div>
</body>
</html>